(this["webpackJsonpifood-frontend-test"]=this["webpackJsonpifood-frontend-test"]||[]).push([[0],{166:function(e,t,a){e.exports=a(294)},171:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),l=a.n(i),c=(a(171),a(39)),o=a(36),s=a(24),u=a(53),m=a(54),p=a(58),d=a(159),f=a(341),h=a(150),v=a.n(h),b=function(){var e=localStorage.getItem("accessToken");if(!e){var t=v.a.parse(window.location.hash.substr(1)).access_token;return window.history.pushState(null,"",window.location.href.split("#")[0]),t}return e},E=a(324),g=a(326),y=a(327),w=a(151),k=Object(w.a)((function(e){return{button:{marginTop:e.spacing(5)},h4:{marginTop:e.spacing(2)},h2:{fontWeight:"500"},main:{textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}}));function O(){var e=k();return r.a.createElement(E.a,{component:"main",className:e.main},r.a.createElement(g.a,{variant:"h2",className:e.h2},"SPOTIFOOD"),r.a.createElement(g.a,{variant:"h4",className:e.h4},"Top playlists para aproveitar sua comida!"),r.a.createElement(y.a,{href:"https://accounts.spotify.com/authorize?client_id=".concat("0ea460875f264befb944160945ea6c91","&redirect_uri=").concat("https://degrecci.github.io/ifood-frontend-test","&response_type=token"),variant:"contained",color:"secondary",size:"large",className:e.button},"Login com Spotify"))}var j=a(84),N=a(155),x=a(13),T=a(15),F=a(338),S=a(339),C=a(340),I=a(337),L=a(345),A=a(347),P=a(158),D=a.n(P),B=a(331),W=a(332),_=a(333),M=a(342),R=a(43),z=a.n(R),U=a(64),H=a(104),J=a.n(H),V=function(){var e=Object(U.a)(z.a.mark((function e(){var t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.get("http://www.mocky.io/v2/5a25fade2e0000213aa90776");case 2:return t=e.sent,a=t.data,e.abrupt("return",a.filters);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){var t=e.response;if(401!==t.status)return t;localStorage.removeItem("accessToken")},$=function(){var e=Object(U.a)(z.a.mark((function e(){var t,a,n,r,i=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=localStorage.getItem("accessToken"),e.prev=2,e.next=5,J.a.get("https://api.spotify.com/v1/browse/featured-playlists",{params:t,headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=e.sent,r=n.data,e.abrupt("return",r.playlists.items);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",G(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),q=a(3),K=a(343),Q=a(328),X=a(349),Y=a(344),Z=Object(w.a)((function(){return{formControl:{minWidth:"100%"}}})),ee=function(e){var t=e.input,a=e.children,n=e.className,i=e.label,l=Object(q.a)(e,["input","children","className","label"]);return r.a.createElement(Q.a,{className:n.formControl},r.a.createElement(X.a,null,i),r.a.createElement(Y.a,Object.assign({native:!0},t,l,{inputProps:{name:t.name}}),a))};var te=function(e){var t=e.values,a=e.id,n=e.filterName,i=Z();return r.a.createElement(K.a,{name:a,component:ee,className:i,label:n},r.a.createElement("option",null),t.map((function(e,t){var a=e.value,n=e.name;return r.a.createElement("option",{value:a,key:t},n)})))},ae=a(352),ne=function(e){var t=e.label,a=e.input,n=(e.className,Object(q.a)(e,["label","input","className"]));return r.a.createElement(ae.a,Object.assign({InputLabelProps:{shrink:!0},type:"datetime-local",label:t},a,n))};var re=function(e){var t=e.filterName,a=e.id;return r.a.createElement(K.a,{name:a,component:ne,label:t})},ie=function(e){var t=e.label,a=e.input,n=Object(q.a)(e,["label","input"]);return r.a.createElement(ae.a,Object.assign({label:t,placeholder:t},a,n,{fullWidth:!0}))};var le=function(e){var t=e.filterName,a=e.id;return r.a.createElement(K.a,{name:a,component:ie,label:t})},ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={filters:null,isLoadingFilters:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;V().then((function(t){return e.setState({filters:t,isLoadingFilters:!1})}))}},{key:"renderFilters",value:function(e){return"locale"===e.id||"country"===e.id?r.a.createElement(te,{filterName:e.name,values:e.values,key:e.id,id:e.id}):"limit"===e.id||"offset"===e.id?r.a.createElement(le,{filterName:e.name,validations:e.validations,key:e.id,id:e.id}):r.a.createElement(re,{filterName:e.name,validations:e.validations,key:e.id,id:e.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.isLoadingFilters;return r.a.createElement(B.a,null,n&&r.a.createElement(W.a,null),!n&&a.map((function(t){return r.a.createElement(_.a,{key:t.id},e.renderFilters(t))})))}}]),t}(n.Component),oe=Object(M.a)({form:"FILTERS_FORM"})(ce),se=a(334),ue=a(335),me=a(336),pe=a(157),de=a.n(pe),fe=a(350),he=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,playlists:[],name:""},a._handleNameChange=function(e){var t=e.target.value;a.setState({name:t})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listFeaturedPlaylists(),this.pollingInterval=setInterval((function(){return e.listFeaturedPlaylists()}),3e4)}},{key:"componentDidUpdate",value:function(e,t){this.state===t&&this.listFeaturedPlaylists()}},{key:"componentWillUnmount",value:function(){this.pollingInterval=null}},{key:"listFeaturedPlaylists",value:function(){var e=Object(U.a)(z.a.mark((function e(){var t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.formValues,e.next=3,$(t);case 3:a=e.sent,this.setState({isLoading:!1,playlists:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.playlists,n=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{margin:"normal",label:"Buscar playlists",variant:"outlined",onChange:this._handleNameChange,fullWidth:!0}),t&&r.a.createElement(W.a,null),!t&&r.a.createElement(se.a,{cellHeight:300},a.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})).map((function(e,t){return r.a.createElement(ue.a,{key:t},r.a.createElement("img",{src:e.images[0].url,alt:e.name}),r.a.createElement(me.a,{title:e.name,subtitle:r.a.createElement("span",null,e.description),actionIcon:r.a.createElement(I.a,{"aria-label":"Link para a playlist ".concat(e.name)},r.a.createElement(de.a,null))}))}))))}}]),t}(n.Component),ve=Object(c.b)((function(e){return{formValues:Object(fe.a)("FILTERS_FORM")(e)}}))(he),be=(a(293),Object(w.a)((function(e){return{root:{display:"flex"},drawer:Object(x.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(x.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(x.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(N.a)({},e.mixins.toolbar,{width:"100%"}),drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),paddingTop:e.spacing(10),justifyContent:"center",display:"flex"}}})));var Ee=function(){var e=be(),t=Object(T.a)(),a=r.a.useState(!1),n=Object(j.a)(a,2),i=n[0],l=n[1],c=function(){l(!i)},o=r.a.createElement("div",null,r.a.createElement("div",{className:e.toolbar}),r.a.createElement(oe,null));return r.a.createElement("div",{className:e.root},r.a.createElement(F.a,null),r.a.createElement(S.a,{position:"fixed",className:e.appBar},r.a.createElement(C.a,null,r.a.createElement(I.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:c,className:e.menuButton},r.a.createElement(D.a,null)),r.a.createElement(g.a,{variant:"h6",noWrap:!0},"SpotiFood"))),r.a.createElement("nav",{className:e.drawer,"aria-label":"mailbox folders"},r.a.createElement(L.a,{smUp:!0,implementation:"css"},r.a.createElement(A.a,{variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:i,onClose:c,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},o)),r.a.createElement(L.a,{xsDown:!0,implementation:"css"},r.a.createElement(A.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},o))),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar},r.a.createElement(ve,null))))},ge=Object(d.a)({palette:{primary:{main:"#EA1D2C"},secondary:{main:"#1ED760"}}}),ye=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasAccessToken:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleAccessToken()}},{key:"handleAccessToken",value:function(){var e=b();e&&(!function(e){localStorage.setItem("accessToken",e)}(e),this.setState({hasAccessToken:!0}))}},{key:"render",value:function(){var e=this.state.hasAccessToken;return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{theme:ge},e&&r.a.createElement(Ee,null),!e&&r.a.createElement(O,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=a(14),ke=a(348),Oe=Object(we.b)({form:ke.a}),je=(window.devToolsExtension?window.devToolsExtension()(we.c):we.c)(Oe);l.a.render(r.a.createElement(c.a,{store:je},r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[166,1,2]]]);
//# sourceMappingURL=main.43bb6d35.chunk.js.map