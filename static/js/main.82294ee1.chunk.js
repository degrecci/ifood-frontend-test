(this["webpackJsonpifood-frontend-test"]=this["webpackJsonpifood-frontend-test"]||[]).push([[0],{169:function(e,t,a){e.exports=a(298)},174:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),o=(a(174),a(40)),c=a(37),s=a(24),u=a(53),m=a(54),p=a(58),d=a(162),f=a(347),h=a(84),v=(a(178),a(152)),b=a.n(v),g=function(){var e=localStorage.getItem("accessToken");if(!e){var t=b.a.parse(window.location.hash.substr(1)).access_token;return window.history.pushState(null,"",window.location.href.split("#")[0]),t}return e},y=function(){localStorage.removeItem("accessToken")},E=a(330),k=a(332),w=a(333),O=a(153),j=Object(O.a)((function(e){return{button:{marginTop:e.spacing(5)},h4:{marginTop:e.spacing(2)},h2:{fontWeight:"500"},main:{textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}}));function x(){var e=j();return r.a.createElement(E.a,{component:"main",className:e.main},r.a.createElement(k.a,{variant:"h2",className:e.h2},"SPOTIFOOD"),r.a.createElement(k.a,{variant:"h4",className:e.h4},"Top playlists para aproveitar sua comida!"),r.a.createElement(w.a,{href:"https://accounts.spotify.com/authorize?client_id=".concat("0ea460875f264befb944160945ea6c91","&response_type=token&redirect_uri=").concat("https://degrecci.github.io/ifood-frontend-test"),variant:"contained",color:"secondary",size:"large",className:e.button},"Entrar com Spotify"))}var N=a(88),S=a(157),T=a(13),C=a(15),L=a(337),F=a(344),I=a(345),A=a(346),D=a(343),P=a(352),B=a(353),W=a(161),_=a.n(W),M=a(338),R=a(339),z=a(348),U=a(44),V=a.n(U),H=a(64),J=a(106),G=a.n(J),$=function(){var e=Object(H.a)(V.a.mark((function e(){var t,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("https://www.mocky.io/v2/5a25fade2e0000213aa90776");case 2:return t=e.sent,a=t.data,e.abrupt("return",a.filters);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){var t=e.response;401===t.status&&y(),h.b.error("[".concat(t.status,"] - ").concat(t.data.error.message))},K=function(){var e=Object(H.a)(V.a.mark((function e(){var t,a,n,r,i=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=localStorage.getItem("accessToken"),e.prev=2,e.next=5,G.a.get("https://api.spotify.com/v1/browse/featured-playlists",{params:t,headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=e.sent,r=n.data,e.abrupt("return",r.playlists.items);case 10:return e.prev=10,e.t0=e.catch(2),q(e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),Q=a(3),X=a(349),Y=a(334),Z=a(358),ee=a(350),te=Object(O.a)((function(){return{formControl:{minWidth:"100%"}}})),ae=function(e){var t=e.input,a=e.children,n=e.className,i=e.label,l=Object(Q.a)(e,["input","children","className","label"]);return r.a.createElement(Y.a,{className:n.formControl},r.a.createElement(Z.a,null,i),r.a.createElement(ee.a,Object.assign({native:!0},t,l,{inputProps:{name:t.name}}),a))};var ne=function(e){var t=e.values,a=e.id,n=e.filterName,i=te();return r.a.createElement(X.a,{name:a,component:ae,className:i,label:n},r.a.createElement("option",null),t.map((function(e,t){var a=e.value,n=e.name;return r.a.createElement("option",{value:a,key:t},n)})))},re=a(357),ie=a(159),le=a.n(ie),oe=function(e){var t=e.label,a=e.input,n=(e.className,Object(Q.a)(e,["label","input","className"]));return r.a.createElement(re.a,Object.assign({InputLabelProps:{shrink:!0},type:"datetime-local",label:t},a,n))};var ce=function(e){var t=e.filterName,a=e.id,n=e.validation;return r.a.createElement(X.a,{name:a,component:oe,label:t,parse:function(e){return le()(e).toISOString(n.pattern)}})},se=function(e,t){var a=t.min,n=t.max;if(e>n||e<a)return"Valor deve estar entre ".concat(a," e ").concat(n)},ue=function(e){var t=e.label,a=e.input,n=e.meta,i=Object(Q.a)(e,["label","input","meta"]);return r.a.createElement(re.a,Object.assign({label:t,placeholder:t,helperText:n.error},a,i,{fullWidth:!0,type:"number"}))};var me=function(e){var t=e.filterName,a=e.id,n=e.validation,i=!!n.min;return r.a.createElement(X.a,{name:a,component:ue,label:t,validate:i?function(e){return se(e,n)}:void 0})},pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={filters:null,isLoadingFilters:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;$().then((function(t){return e.setState({filters:t,isLoadingFilters:!1})}))}},{key:"renderFilters",value:function(e){return"locale"===e.id||"country"===e.id?r.a.createElement(ne,{filterName:e.name,values:e.values,key:e.id,id:e.id}):"limit"===e.id||"offset"===e.id?r.a.createElement(me,{filterName:e.name,validation:e.validation,key:e.id,id:e.id}):r.a.createElement(ce,{filterName:e.name,validation:e.validation,key:e.id,id:e.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.isLoadingFilters,i=this.props,l=i.reset,o=i.pristine;return r.a.createElement(L.a,null,n&&r.a.createElement(M.a,null),!n&&a.map((function(t){return r.a.createElement(R.a,{key:t.id,"data-test-id":"filter-item"},e.renderFilters(t))})),r.a.createElement(R.a,null,r.a.createElement(w.a,{onClick:l,disabled:o,color:"primary",variant:"contained",fullWidth:!0},"Limpar filtros")))}}]),t}(n.Component),de=Object(z.a)({form:"FILTERS_FORM"})(pe),fe=a(340),he=a(341),ve=a(342),be=a(160),ge=a.n(be),ye=a(356),Ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,playlists:[],name:""},a._handleNameChange=function(e){var t=e.target.value;a.setState({name:t})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listFeaturedPlaylists(),this.pollingInterval=setInterval((function(){return e.listFeaturedPlaylists()}),3e4)}},{key:"componentDidUpdate",value:function(e,t){this.state===t&&this.listFeaturedPlaylists()}},{key:"componentWillUnmount",value:function(){this.pollingInterval=null}},{key:"listFeaturedPlaylists",value:function(){var e=Object(H.a)(V.a.mark((function e(){var t,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.formValues,e.next=3,K(t);case 3:a=e.sent,this.setState({isLoading:!1,playlists:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.playlists,n=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{margin:"normal",label:"Buscar playlists",variant:"outlined",onChange:this._handleNameChange,fullWidth:!0}),t&&r.a.createElement(M.a,null),!t&&r.a.createElement(fe.a,{cellHeight:300},a.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})).map((function(e,t){return r.a.createElement(he.a,{key:t},r.a.createElement("img",{src:e.images[0].url,alt:e.name}),r.a.createElement(ve.a,{"aria-label":"Nome da playlist",title:e.name,subtitle:r.a.createElement("span",{"aria-label":"Descri\xe7\xe3o da playlist"},e.description),actionIcon:r.a.createElement(D.a,{"aria-label":"Link para a playlist ".concat(e.name),href:e.external_urls.spotify,target:"blank"},r.a.createElement(ge.a,{color:"secondary"}))}))}))))}}]),t}(n.Component),ke=Object(o.b)((function(e){return{formValues:Object(ye.a)("FILTERS_FORM")(e)}}))(Ee),we=(a(297),Object(O.a)((function(e){return{root:{display:"flex"},drawer:Object(T.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(T.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(T.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(S.a)({},e.mixins.toolbar,{width:"100%"}),drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),paddingTop:e.spacing(10),justifyContent:"center",display:"flex"},drawerContent:{display:"flex",flexDirection:"column",height:"100%"},logoutButton:{margin:"20px",display:"flex",alignItems:"flex-end",height:"100%"}}})));var Oe=function(e){var t=e.handleLogout,a=we(),n=Object(C.a)(),i=r.a.useState(!1),l=Object(N.a)(i,2),o=l[0],c=l[1],s=function(){c(!o)},u=r.a.createElement("div",{className:a.drawerContent},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(de,null),r.a.createElement(L.a,{className:a.logoutButton},r.a.createElement(w.a,{onClick:t,variant:"contained",color:"primary",fullWidth:!0},"Sair")));return r.a.createElement("div",{className:a.root},r.a.createElement(F.a,null),r.a.createElement(I.a,{position:"fixed",className:a.appBar},r.a.createElement(A.a,null,r.a.createElement(D.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:s,className:a.menuButton},r.a.createElement(_.a,null)),r.a.createElement(k.a,{variant:"h6",noWrap:!0},"SpotiFood"))),r.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},r.a.createElement(P.a,{smUp:!0,implementation:"css"},r.a.createElement(B.a,{variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:o,onClose:s,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},u)),r.a.createElement(P.a,{xsDown:!0,implementation:"css"},r.a.createElement(B.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},u))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar},r.a.createElement(ke,null))))},je=Object(d.a)({palette:{primary:{main:"#EA1D2C"},secondary:{main:"#1ED760"}}}),xe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasAccessToken:!1},a.handleLogout=function(){y(),a.setState({hasAccessToken:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleAccessToken()}},{key:"handleAccessToken",value:function(){var e=g();e&&(!function(e){localStorage.setItem("accessToken",e)}(e),this.setState({hasAccessToken:!0}))}},{key:"render",value:function(){var e=this.state.hasAccessToken;return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{theme:je},e&&r.a.createElement(Oe,{handleLogout:this.handleLogout}),!e&&r.a.createElement(x,null)),r.a.createElement(h.a,{position:"bottom-right"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=a(14),Se=a(354),Te=Object(Ne.b)({form:Se.a}),Ce=(window.devToolsExtension?window.devToolsExtension()(Ne.c):Ne.c)(Te);l.a.render(r.a.createElement(o.a,{store:Ce},r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[169,1,2]]]);
//# sourceMappingURL=main.82294ee1.chunk.js.map