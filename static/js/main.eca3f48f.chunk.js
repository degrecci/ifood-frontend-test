(this["webpackJsonpifood-frontend-test"]=this["webpackJsonpifood-frontend-test"]||[]).push([[0],{169:function(e,t,a){e.exports=a(298)},174:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),o=(a(174),a(40)),c=a(37),s=a(24),u=a(53),m=a(54),p=a(58),d=a(162),f=a(347),h=a(84),v=(a(178),a(152)),b=a.n(v),y=function(){var e=localStorage.getItem("accessToken");if(!e){var t=b.a.parse(window.location.hash.substr(1)).access_token;return window.history.pushState(null,"",window.location.href.split("#")[0]),t}return e},E=a(330),g=a(332),k=a(333),w=a(153),O=Object(w.a)((function(e){return{button:{marginTop:e.spacing(5)},h4:{marginTop:e.spacing(2)},h2:{fontWeight:"500"},main:{textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}}));function j(){var e=O();return r.a.createElement(E.a,{component:"main",className:e.main},r.a.createElement(g.a,{variant:"h2",className:e.h2},"SPOTIFOOD"),r.a.createElement(g.a,{variant:"h4",className:e.h4},"Top playlists para aproveitar sua comida!"),r.a.createElement(k.a,{href:"https://accounts.spotify.com/authorize?client_id=".concat("0ea460875f264befb944160945ea6c91","&response_type=token&redirect_uri=").concat("https://degrecci.github.io/ifood-frontend-test"),variant:"contained",color:"secondary",size:"large",className:e.button},"Login com Spotify"))}var N=a(88),x=a(157),T=a(13),S=a(15),C=a(344),F=a(345),I=a(346),L=a(343),A=a(352),P=a(353),D=a(161),W=a.n(D),_=a(337),B=a(338),M=a(339),R=a(348),z=a(44),U=a.n(z),V=a(64),H=a(106),J=a.n(H),G=function(){var e=Object(V.a)(U.a.mark((function e(){var t,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.get("https://www.mocky.io/v2/5a25fade2e0000213aa90776");case 2:return t=e.sent,a=t.data,e.abrupt("return",a.filters);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){var t=e.response;401===t.status&&localStorage.removeItem("accessToken"),h.b.error("[".concat(t.status,"] - ").concat(t.data.error.message))},q=function(){var e=Object(V.a)(U.a.mark((function e(){var t,a,n,r,i=arguments;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=localStorage.getItem("accessToken"),e.prev=2,e.next=5,J.a.get("https://api.spotify.com/v1/browse/featured-playlists",{params:t,headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=e.sent,r=n.data,e.abrupt("return",r.playlists.items);case 10:return e.prev=10,e.t0=e.catch(2),$(e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),K=a(3),Q=a(349),X=a(334),Y=a(358),Z=a(350),ee=Object(w.a)((function(){return{formControl:{minWidth:"100%"}}})),te=function(e){var t=e.input,a=e.children,n=e.className,i=e.label,l=Object(K.a)(e,["input","children","className","label"]);return r.a.createElement(X.a,{className:n.formControl},r.a.createElement(Y.a,null,i),r.a.createElement(Z.a,Object.assign({native:!0},t,l,{inputProps:{name:t.name}}),a))};var ae=function(e){var t=e.values,a=e.id,n=e.filterName,i=ee();return r.a.createElement(Q.a,{name:a,component:te,className:i,label:n},r.a.createElement("option",null),t.map((function(e,t){var a=e.value,n=e.name;return r.a.createElement("option",{value:a,key:t},n)})))},ne=a(357),re=a(159),ie=a.n(re),le=function(e){var t=e.label,a=e.input,n=(e.className,Object(K.a)(e,["label","input","className"]));return r.a.createElement(ne.a,Object.assign({InputLabelProps:{shrink:!0},type:"datetime-local",label:t},a,n))};var oe=function(e){var t=e.filterName,a=e.id,n=e.validation;return r.a.createElement(Q.a,{name:a,component:le,label:t,parse:function(e){return ie()(e).toISOString(n.pattern)}})},ce=function(e,t){var a=t.min,n=t.max;if(e>n||e<a)return"Valor deve estar entre ".concat(a," e ").concat(n)},se=function(e){var t=e.label,a=e.input,n=e.meta,i=Object(K.a)(e,["label","input","meta"]);return r.a.createElement(ne.a,Object.assign({label:t,placeholder:t,helperText:n.error},a,i,{fullWidth:!0,type:"number"}))};var ue=function(e){var t=e.filterName,a=e.id,n=e.validation,i=!!n.min;return r.a.createElement(Q.a,{name:a,component:se,label:t,validate:i?function(e){return ce(e,n)}:void 0})},me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={filters:null,isLoadingFilters:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;G().then((function(t){return e.setState({filters:t,isLoadingFilters:!1})}))}},{key:"renderFilters",value:function(e){return"locale"===e.id||"country"===e.id?r.a.createElement(ae,{filterName:e.name,values:e.values,key:e.id,id:e.id}):"limit"===e.id||"offset"===e.id?r.a.createElement(ue,{filterName:e.name,validation:e.validation,key:e.id,id:e.id}):r.a.createElement(oe,{filterName:e.name,validation:e.validation,key:e.id,id:e.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filters,n=t.isLoadingFilters,i=this.props,l=i.reset,o=i.pristine;return r.a.createElement(_.a,null,n&&r.a.createElement(B.a,null),!n&&a.map((function(t){return r.a.createElement(M.a,{key:t.id,"data-test-id":"filter-item"},e.renderFilters(t))})),r.a.createElement(M.a,null,r.a.createElement(k.a,{onClick:l,disabled:o,color:"primary",variant:"contained",fullWidth:!0},"Limpar filtros")))}}]),t}(n.Component),pe=Object(R.a)({form:"FILTERS_FORM"})(me),de=a(340),fe=a(341),he=a(342),ve=a(160),be=a.n(ve),ye=a(356),Ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,playlists:[],name:""},a._handleNameChange=function(e){var t=e.target.value;a.setState({name:t})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listFeaturedPlaylists(),this.pollingInterval=setInterval((function(){return e.listFeaturedPlaylists()}),3e4)}},{key:"componentDidUpdate",value:function(e,t){this.state===t&&this.listFeaturedPlaylists()}},{key:"componentWillUnmount",value:function(){this.pollingInterval=null}},{key:"listFeaturedPlaylists",value:function(){var e=Object(V.a)(U.a.mark((function e(){var t,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.formValues,e.next=3,q(t);case 3:a=e.sent,this.setState({isLoading:!1,playlists:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.playlists,n=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{margin:"normal",label:"Buscar playlists",variant:"outlined",onChange:this._handleNameChange,fullWidth:!0}),t&&r.a.createElement(B.a,null),!t&&r.a.createElement(de.a,{cellHeight:300},a.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})).map((function(e,t){return r.a.createElement(fe.a,{key:t},r.a.createElement("img",{src:e.images[0].url,alt:e.name}),r.a.createElement(he.a,{"aria-label":"Nome da playlist",title:e.name,subtitle:r.a.createElement("span",{"aria-label":"Descri\xe7\xe3o da playlist"},e.description),actionIcon:r.a.createElement(L.a,{"aria-label":"Link para a playlist ".concat(e.name),href:e.external_urls.spotify,target:"blank"},r.a.createElement(be.a,{color:"secondary"}))}))}))))}}]),t}(n.Component),ge=Object(o.b)((function(e){return{formValues:Object(ye.a)("FILTERS_FORM")(e)}}))(Ee),ke=(a(297),Object(w.a)((function(e){return{root:{display:"flex"},drawer:Object(T.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(T.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(T.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(x.a)({},e.mixins.toolbar,{width:"100%"}),drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),paddingTop:e.spacing(10),justifyContent:"center",display:"flex"}}})));var we=function(){var e=ke(),t=Object(S.a)(),a=r.a.useState(!1),n=Object(N.a)(a,2),i=n[0],l=n[1],o=function(){l(!i)},c=r.a.createElement("div",null,r.a.createElement("div",{className:e.toolbar}),r.a.createElement(pe,null));return r.a.createElement("div",{className:e.root},r.a.createElement(C.a,null),r.a.createElement(F.a,{position:"fixed",className:e.appBar},r.a.createElement(I.a,null,r.a.createElement(L.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:o,className:e.menuButton},r.a.createElement(W.a,null)),r.a.createElement(g.a,{variant:"h6",noWrap:!0},"SpotiFood"))),r.a.createElement("nav",{className:e.drawer,"aria-label":"mailbox folders"},r.a.createElement(A.a,{smUp:!0,implementation:"css"},r.a.createElement(P.a,{variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:i,onClose:o,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},c)),r.a.createElement(A.a,{xsDown:!0,implementation:"css"},r.a.createElement(P.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},c))),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar},r.a.createElement(ge,null))))},Oe=Object(d.a)({palette:{primary:{main:"#EA1D2C"},secondary:{main:"#1ED760"}}}),je=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasAccessToken:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleAccessToken()}},{key:"handleAccessToken",value:function(){var e=y();e&&(!function(e){localStorage.setItem("accessToken",e)}(e),this.setState({hasAccessToken:!0}))}},{key:"render",value:function(){var e=this.state.hasAccessToken;return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{theme:Oe},e&&r.a.createElement(we,null),!e&&r.a.createElement(j,null)),r.a.createElement(h.a,{position:"bottom-right"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=a(14),xe=a(354),Te=Object(Ne.b)({form:xe.a}),Se=(window.devToolsExtension?window.devToolsExtension()(Ne.c):Ne.c)(Te);l.a.render(r.a.createElement(o.a,{store:Se},r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[169,1,2]]]);
//# sourceMappingURL=main.eca3f48f.chunk.js.map